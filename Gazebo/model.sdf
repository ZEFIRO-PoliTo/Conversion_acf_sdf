<?xml version="1.0" ?>
<sdf version="1.9">
  <model name="zefiro_vtol">
    <pose>0 0 0.5 0 0 0</pose>

    <link name="fuselage">
      <inertial>
        <mass>12.5</mass>
        <inertia>
          <ixx>1.25</ixx><ixy>0</ixy><ixz>0</ixz>
          <iyy>1.40</iyy><iyz>0</iyz><izz>1.60</izz>
        </inertia>
      </inertial>
      <collision name="fuselage_collision">
        <geometry><box><size>1.5 0.3 0.3</size></box></geometry>
      </collision>
      <visual name="fuselage_visual">
      	<pose>0 0 0 0 1.57 0</pose>
        <geometry>
          <mesh>
            <uri>model://zefiro_vtol/meshes/fusoliera5.obj</uri>
            <scale>1 1 1</scale>
          </mesh>
        </geometry>
        <material><ambient>0.7 0.7 0.7 1</ambient><diffuse>0.7 0.7 0.7 1</diffuse></material>
      </visual>
      <sensor name="imu_sensor" type="imu">
        <always_on>1</always_on>
        <update_rate>100</update_rate>
        <topic>zefiro/imu</topic>
      </sensor>
      <sensor name="navsat_sensor" type="navsat">
        <always_on>1</always_on>
        <update_rate>10</update_rate>
        <topic>zefiro/gps</topic>
      </sensor>
    </link>

    <link name="wing_left">
      <pose>0 0.5 0.1 0 0 0</pose>
      <inertial>
        <mass>1.0</mass>
        <inertia>
          <ixx>0.1</ixx><ixy>0</ixy><ixz>0</ixz>
          <iyy>0.01</iyy><iyz>0</iyz><izz>0.1</izz>
        </inertia>
      </inertial>
      <visual name="visual">
      	<pose>0 0 0 1.57 0 0</pose>
        <geometry>
          <mesh>
            <uri>model://zefiro_vtol/meshes/ala2412X.obj</uri>
            <scale>1 1 1</scale>
          </mesh>
        </geometry>
      </visual>
      <collision name="collision">
        <geometry><box><size>0.4 1.5 0.05</size></box></geometry>
      </collision>
    </link>

    <link name="wing_right">
      <pose>0 -0.5 0.1 0 0 0</pose>
      <inertial>
        <mass>1.0</mass>
        <inertia>
          <ixx>0.1</ixx><ixy>0</ixy><ixz>0</ixz>
          <iyy>0.01</iyy><iyz>0</iyz><izz>0.1</izz>
        </inertia>
      </inertial>
      <visual name="visual">
      	<pose>0 0 0 1.57 0 0</pose>
        <geometry>
          <mesh>
            <uri>model://zefiro_vtol/meshes/ala2412X.obj</uri>
            <scale>1 1 1</scale>
          </mesh>
        </geometry>
      </visual>
      <collision name="collision">
        <geometry><box><size>0.4 1.5 0.05</size></box></geometry>
      </collision>
    </link>

    <link name="h_tail">
      <pose>-0.7 0 0.1 0 0 0</pose>
      <inertial>
        <mass>0.5</mass>
        <inertia>
            <ixx>0.05</ixx><ixy>0</ixy><ixz>0</ixz>
            <iyy>0.01</iyy><iyz>0</iyz><izz>0.05</izz>
        </inertia>
      </inertial>
      <visual name="h_tail_visual">
      	<pose>0 0 0 1.57 0 0</pose>
        <geometry>
          <mesh>
            <uri>model://zefiro_vtol/meshes/impennaggio_orizzX.obj</uri>
            <scale>1 1 1</scale>
          </mesh>
        </geometry>
      </visual>
      <collision name="h_tail_collision">
         <geometry><box><size>0.3 0.8 0.05</size></box></geometry>
      </collision>
    </link>

    <link name="v_tail">
      <pose>-0.7 0 0.3 0 0 0</pose>
      <inertial>
        <mass>0.2</mass>
        <inertia>
            <ixx>0.02</ixx><ixy>0</ixy><ixz>0</ixz>
            <iyy>0.02</iyy><iyz>0</iyz><izz>0.005</izz>
        </inertia>
      </inertial>
      <visual name="v_tail_visual">
      	<pose>0 0 0 1.57 0 0</pose>
        <geometry>
          <mesh>
             <uri>model://zefiro_vtol/meshes/impennaggio_vertX.obj</uri>
             <scale>1 1 1</scale>
          </mesh>
        </geometry>
      </visual>
      <collision name="v_tail_collision">
        <geometry><box><size>0.4 0.05 0.4</size></box></geometry>
      </collision>
    </link>

    <joint name="wing_left_joint" type="fixed">
      <parent>fuselage</parent>
      <child>wing_left</child>
    </joint>
    <joint name="wing_right_joint" type="fixed">
      <parent>fuselage</parent>
      <child>wing_right</child>
    </joint>
    <joint name="h_tail_joint" type="fixed">
      <parent>fuselage</parent>
      <child>h_tail</child>
    </joint>
    <joint name="v_tail_joint" type="fixed">
      <parent>h_tail</parent>
      <child>v_tail</child>
    </joint>

    <link name="vtol_rotor_front_left">
      <pose>0.5 0.5 0.2 0 0 0</pose>
      <inertial>
        <mass>0.1</mass>
        <inertia>
          <ixx>0.001</ixx><ixy>0</ixy><ixz>0</ixz>
          <iyy>0.001</iyy><iyz>0</iyz><izz>0.001</izz>
        </inertia>
      </inertial>
      <visual name="visual">
        <geometry><cylinder><radius>0.2</radius><length>0.05</length></cylinder></geometry>
        <material><ambient>0 0 0 1</ambient><diffuse>0 0 0 1</diffuse></material>
      </visual>
      <collision name="collision">
        <geometry><cylinder><radius>0.2</radius><length>0.05</length></cylinder></geometry>
      </collision>
    </link>

    <joint name="vtol_rotor_fl_joint" type="revolute">
      <parent>wing_left</parent>
      <child>vtol_rotor_front_left</child>
      <axis>
        <xyz>0 0 1</xyz>
        <limit><lower>-1e16</lower><upper>1e16</upper></limit>
      </axis>
    </joint>

    <plugin filename="gz-sim-multicopter-motor-model-system" name="gz::sim::systems::MulticopterMotorModel">
      <jointName>vtol_rotor_fl_joint</jointName>
      <linkName>vtol_rotor_front_left</linkName>
      <turningDirection>cw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000</maxRotVelocity>
      <motorConstant>8.54858e-06</motorConstant>
      <momentConstant>0.06</momentConstant>
      <commandSubTopic>command/motor_speed</commandSubTopic>
      <motorNumber>0</motorNumber>
    </plugin>
  </model>
</sdf>
